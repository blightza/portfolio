{"changed":true,"filter":false,"title":"app.js","tooltip":"/app.js","value":"var express          = require(\"express\"),\n    app              = express(),\n    bodyParser       = require(\"body-parser\"),\n    mongoose         = require(\"mongoose\"),\n    passport         = require(\"passport\"),\n    localStratergy   = require(\"passport-local\"),\n    methodOverride   = require(\"method-override\"),\n    flash            = require(\"connect-flash\"),\n    User             = require(\"./models/user\"),\n    Blog             = require(\"./models/blog\"),\n    Comment          = require(\"./models/comment\")\n    \n    \nvar indexRoutes      = require(\"./routes/index\"),\n    blogRoutes       = require(\"./routes/blog\"),\n    commentRoutes    = require(\"./routes/comment\")\n    \n    \n    \nmongoose.connect(\"mongodb://bradley:bradster1@ds149706.mlab.com:49706/portfolio\", {useNewUrlParser: true});\napp.use(bodyParser.urlencoded({extended:true}));\napp.set(\"view engine\", \"ejs\");\napp.use(express.static(__dirname + \"/public\"));\napp.use(methodOverride(\"_method\"));\napp.use(flash());\n\n// -= Passport Config =-\napp.use(require(\"express-session\")({\n    secret: \"Skibor is amazing\",\n    resave: false,\n    saveUninitialized: false\n}));\napp.use(passport.initialize());\napp.use(passport.session());\npassport.use(new localStratergy(User.authenticate()));\npassport.serializeUser(User.serializeUser());\npassport.deserializeUser(User.deserializeUser());\n\napp.use(function(req, res, next){\n    res.locals.currentUser = req.user;\n    res.locals.error = req.flash(\"error\");\n    res.locals.success = req.flash(\"success\");\n    next();\n});\n\napp.use(indexRoutes);\napp.use(\"/blogs/:id/comments\", commentRoutes);\napp.use(\"/blogs\", blogRoutes);\n\napp.listen(process.env.PORT || 3000, function(){\n  console.log(\"Express server listening on port %d in %s mode\", this.address().port, app.settings.env);\n});","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":49,"column":0},"end":{"row":51,"column":3},"action":"remove","lines":["app.listen(process.env.PORT, process.env.IP, function(){","    console.log(\"server started\");","});"],"id":1},{"start":{"row":49,"column":0},"end":{"row":51,"column":3},"action":"insert","lines":["app.listen(process.env.PORT || 3000, function(){","  console.log(\"Express server listening on port %d in %s mode\", this.address().port, app.settings.env);","});"]}]]},"ace":{"folds":[],"scrolltop":390,"scrollleft":0,"selection":{"start":{"row":51,"column":3},"end":{"row":51,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":26,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1557079440679}